<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clamshell Box Calculator</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        .container { width: 80%; margin: auto; }
        .input-group { margin: 5px; }
        input { width: 80px; }
        label { margin-right: 5px; }
        .unit { margin-left: 5px; }
        canvas { border: 1px solid black; margin-top: 20px; }
    </style>
</head>
<body>

    <h1>Clamshell Box Calculator</h1>
    <div class="container">
        <div class="input-group">
            <label>Book Height:</label> <input type="number" id="bah" value="15"> <span class="unit">mm</span>
        </div>
        <div class="input-group">
            <label>Book Length:</label> <input type="number" id="bal" value="148"> <span class="unit">mm</span>
        </div>
        <div class="input-group">
            <label>Book Width:</label> <input type="number" id="baw" value="105"> <span class="unit">mm</span>
        </div>
        <div class="input-group">
            <label>Board Thickness:</label> <input type="number" id="board" value="2"> <span class="unit">mm</span>
        </div>
        <button onclick="calculate()">Generate Diagram</button>
        <canvas id="diagram" width="900" height="600"></canvas>
    </div>

    <script>
        function calculate() {
            const A1 = parseFloat(document.getElementById('bah').value);
            const A2 = parseFloat(document.getElementById('bal').value);
            const A3 = parseFloat(document.getElementById('baw').value);
            const A4 = parseFloat(document.getElementById('board').value);

            const ctx = document.getElementById('diagram').getContext('2d');
            ctx.clearRect(0, 0, 900, 600);
            ctx.font = "14px Arial";
            ctx.fillStyle = "black";

            // Auto-scale if dimensions are too large
            const scale = Math.min(500 / (A2 + 100), 350 / (A1 + 100), 1);

            function drawRect(x, y, width, height, label) {
                ctx.strokeRect(x, y, width * scale, height * scale);
                ctx.fillText(`${label}: ${width} x ${height} mm`, x, y - 5);
            }

            let xStart = 50, yStart = 50;

            // Bottom Tray (left side)
            drawRect(xStart, yStart, A1 + A4, A2 + 2 * A4, "BT3"); // Long side (rotated)
            drawRect(xStart, yStart + (A2 + 2 * A4 + 20) * scale, A1 + A4, A3, "BT2"); // Short side (rotated)
            drawRect(xStart + (A1 + A4 + 20) * scale, yStart + (A2 + 2 * A4 + 20) * scale, A2, A3, "BT1"); // Flat base (rotated)

            // Top Tray (below Bottom Tray)
            let xOffset = xStart + (A1 + A4 + 100) * scale;
            drawRect(xOffset, yStart, A1 + 2 * A4, A2 + 4 * A4, "TT3"); // Long side (rotated)
            drawRect(xOffset, yStart + (A2 + 4 * A4 + 20) * scale, A1 + 2 * A4, A3 + 2 * A4, "TT2"); // Short side (rotated)
            drawRect(xOffset + (A1 + 2 * A4 + 20) * scale, yStart + (A2 + 4 * A4 + 20) * scale, A2 + 2 * A4, A3 + 2 * A4, "TT1"); // Flat base (rotated)

            // Cover pieces (right side)
            let coverX = xOffset + (A1 + 2 * A4 + 100) * scale, coverY = yStart;
            drawRect(coverX, coverY, A2 + 2 * A4 + 1, A3 + 2 * A4 + 1, "C"); // Cover (rotated)
            drawRect(coverX, coverY - (A1 + 2 * A4 + 20) * scale, A2 + 2 * A4, A1 + 2 * A4, "CS"); // Spine (rotated)
        }
    </script>

</body>
</html>
